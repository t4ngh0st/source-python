#// [main]
#// +>> Version 1

import os
import sys
from colorama import Fore, Style
from pyfiglet import Figlet
from modules.pentest_tools import PentestTools
from modules.responses import ChatResponses
from modules.uncensored import UncensoredTools

class PentestChatbot:
    def __init__(self):
        self.pentest = PentestTools()
        self.responses = ChatResponses()
        self.uncensored = UncensoredTools()
        self.show_banner()
        
    def show_banner(self):
        os.system('cls' if os.name == 'nt' else 'clear')
        f = Figlet(font='slant')
        print(Fore.RED + f.renderText('PENTEST BOT') + Style.RESET_ALL)
        print(Fore.YELLOW + "="*60 + Style.RESET_ALL)
        print(Fore.CYAN + "Chatbot Uncensored untuk Pentest - Gunakan dengan Bijak!")
        print(Fore.YELLOW + "="*60 + Style.RESET_ALL)
        print("\n")
        
    def run(self):
        try:
            while True:
                user_input = input(Fore.GREEN + "pentest> " + Style.RESET_ALL).strip().lower()
                
                if not user_input:
                    continue
                    
                if user_input in ['exit', 'quit', 'q']:
                    print(Fore.YELLOW + "Keluar dari Pentest Chatbot..." + Style.RESET_ALL)
                    break
                    
                self.process_input(user_input)
                
        except KeyboardInterrupt:
            print(Fore.YELLOW + "\nKeluar dari Pentest Chatbot..." + Style.RESET_ALL)
            sys.exit(0)
            
    def process_input(self, user_input):
        # Cek perintah uncensored
        if user_input.startswith('uncensored'):
            self.uncensored.handle_command(user_input)
            return
            
        # Cek perintah pentest biasa
        response = self.responses.get_response(user_input)
        if response:
            print(Fore.BLUE + response + Style.RESET_ALL)
        else:
            print(Fore.RED + "Perintah tidak dikenali. Ketik 'help' untuk bantuan." + Style.RESET_ALL)

if __name__ == "__main__":
    chatbot = PentestChatbot()
    chatbot.run()